% report.tex

\documentclass[a4paper,11pt]{article}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{varwidth}
\usepackage{tasks}
% Import packages
\usepackage[a4paper]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage{geometry}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
 }

\usepackage{graphicx}

\usepackage{listings}

% Change enumerate environments you use letters
\renewcommand{\theenumi}{\alph{enumi}}

% Set title, author name and date
\title{Consensus}
\author{Johannes Jørgensen (jgjo),\\ Kevin Skovgaard Gravesen (kegr),\\ Joakim Andreasen (joaan)} 
\date{\today}

\begin{document} 

\maketitle

\subsection*{Introduction}
Consensus is a proof of concept of the Ricart–Agrawala Algorithm. The program is writen in Golang and uses gRPC to pass messages between the clients.
The program is ran by first creating a .env file, with a set of ports to be used, and then running the main.go file multiple times in different terminals.
Each terminal is running a peer which will begin to ask the other peers for permission to access the critical section.

Various improments can be made, including the ability to run the peers on different ip's and to keep the gRPC connections open for longer periods.
It was decided to keep the proof of concept simple, hence the dicision to postpone these improments.

\subsection*{Peers and the critical section}
Every peer wants to access to a critical section. In this proof of concept the critical section is the ability to write special message to std out.
In a real scenario the critical section could be network share or a form of SQL database.

\subsection*{Only one peer is accessing the critical section at any given time}
When a peer wants to access the critical section it requests access by the other peers in the network, and only gets access if all other peers grants access to the peer.


\subsection*{Every peer gets access to the critical section}
As every request from peers in the network gets queued in each system if and only if there is already being accessed to the critical section. 
Therefore if the queue is empty the first peer to request access to the critical section, gets access after being granted access by the other peers.


\newpage
\subsection*{Link to Github repository}

\href{https://github.com/ITU-DISYS2024-CENTRALIZEDSYSTEMS/Consensus}{https://github.com/ITU-DISYS2024-CENTRALIZEDSYSTEMS/Consensus}

\subsection*{Appendix}

\subsubsection*{Logs - Peer #1}
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize]
2024/11/09 17:16:48 Access denied, retrying...
2024/11/09 17:16:48 Accessing critical resource.
2024/11/09 17:16:53 Releasing critical resource.
2024/11/09 17:16:53 RequestAccess: From Peer(ID: 19418, TS: 0) -> Granted: false
2024/11/09 17:16:53 RequestAccess: From Peer(ID: 19590, TS: 0) -> Granted: false
2024/11/09 17:16:54 RequestAccess: From Peer(ID: 19590, TS: 1) -> Granted: true
2024/11/09 17:16:54 RequestAccess: From Peer(ID: 19418, TS: 1) -> Granted: true
2024/11/09 17:16:59 Access denied, retrying...
2024/11/09 17:16:59 RequestAccess: From Peer(ID: 19418, TS: 2) -> Granted: true
2024/11/09 17:17:04 Access denied, retrying...
2024/11/09 17:17:04 RequestAccess: From Peer(ID: 19590, TS: 1) -> Granted: false
2024/11/09 17:17:05 Accessing critical resource.
2024/11/09 17:17:10 Releasing critical resource.
2024/11/09 17:17:10 RequestAccess: From Peer(ID: 19590, TS: 2) -> Granted: false
2024/11/09 17:17:10 RequestAccess: From Peer(ID: 19418, TS: 2) -> Granted: false
2024/11/09 17:17:10 RequestAccess: From Peer(ID: 19590, TS: 3) -> Granted: true
2024/11/09 17:17:10 RequestAccess: From Peer(ID: 19418, TS: 3) -> Granted: true
2024/11/09 17:17:15 Access denied, retrying...
2024/11/09 17:17:16 RequestAccess: From Peer(ID: 19418, TS: 4) -> Granted: true
2024/11/09 17:17:21 Access denied, retrying...
2024/11/09 17:17:21 RequestAccess: From Peer(ID: 19590, TS: 3) -> Granted: false
2024/11/09 17:17:21 Accessing critical resource.
2024/11/09 17:17:26 Releasing critical resource.
2024/11/09 17:17:26 RequestAccess: From Peer(ID: 19590, TS: 4) -> Granted: false
2024/11/09 17:17:26 RequestAccess: From Peer(ID: 19418, TS: 4) -> Granted: false
2024/11/09 17:17:26 RequestAccess: From Peer(ID: 19418, TS: 5) -> Granted: true
2024/11/09 17:17:27 RequestAccess: From Peer(ID: 19590, TS: 5) -> Granted: true
2024/11/09 17:17:27 RequestAccess: From Peer(ID: 19590, TS: 6) -> Granted: true
2024/11/09 17:17:27 RequestAccess: From Peer(ID: 19418, TS: 6) -> Granted: true
2024/11/09 17:17:32 Access denied, retrying...
2024/11/09 17:17:32 RequestAccess: From Peer(ID: 19418, TS: 7) -> Granted: true
2024/11/09 17:17:37 Access denied, retrying...
2024/11/09 17:17:37 RequestAccess: From Peer(ID: 19590, TS: 6) -> Granted: false
2024/11/09 17:17:38 Access denied, retrying...
2024/11/09 17:17:38 RequestAccess: From Peer(ID: 19590, TS: 7) -> Granted: false
2024/11/09 17:17:38 RequestAccess: From Peer(ID: 19590, TS: 8) -> Granted: true
\end{lstlisting}

\subsubsection*{Logs - Peer #2}
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize]
2024/11/09 17:16:48 RequestAccess: From Peer(ID: 19233, TS: 0) -> Granted: false
2024/11/09 17:16:48 RequestAccess: From Peer(ID: 19233, TS: 1) -> Granted: true
2024/11/09 17:16:53 Access denied, retrying...
2024/11/09 17:16:54 RequestAccess: From Peer(ID: 19590, TS: 1) -> Granted: true
2024/11/09 17:16:59 Access denied, retrying...
2024/11/09 17:16:59 RequestAccess: From Peer(ID: 19233, TS: 1) -> Granted: false
2024/11/09 17:16:59 Accessing critical resource.
2024/11/09 17:17:04 Releasing critical resource.
2024/11/09 17:17:04 RequestAccess: From Peer(ID: 19233, TS: 2) -> Granted: false
2024/11/09 17:17:05 RequestAccess: From Peer(ID: 19233, TS: 3) -> Granted: true
2024/11/09 17:17:10 Access denied, retrying...
2024/11/09 17:17:10 RequestAccess: From Peer(ID: 19590, TS: 3) -> Granted: true
2024/11/09 17:17:15 Access denied, retrying...
2024/11/09 17:17:15 RequestAccess: From Peer(ID: 19233, TS: 3) -> Granted: false
2024/11/09 17:17:16 Accessing critical resource.
2024/11/09 17:17:21 Releasing critical resource.
2024/11/09 17:17:21 RequestAccess: From Peer(ID: 19233, TS: 4) -> Granted: false
2024/11/09 17:17:21 RequestAccess: From Peer(ID: 19233, TS: 5) -> Granted: true
2024/11/09 17:17:26 Access denied, retrying...
2024/11/09 17:17:26 Access denied, retrying...
2024/11/09 17:17:27 RequestAccess: From Peer(ID: 19590, TS: 5) -> Granted: false
2024/11/09 17:17:27 RequestAccess: From Peer(ID: 19590, TS: 6) -> Granted: true
2024/11/09 17:17:32 Access denied, retrying...
2024/11/09 17:17:32 RequestAccess: From Peer(ID: 19233, TS: 5) -> Granted: false
2024/11/09 17:17:32 Accessing critical resource.
2024/11/09 17:17:37 Releasing critical resource.
2024/11/09 17:17:37 RequestAccess: From Peer(ID: 19233, TS: 6) -> Granted: false
2024/11/09 17:17:38 RequestAccess: From Peer(ID: 19233, TS: 7) -> Granted: false
2024/11/09 17:17:38 RequestAccess: From Peer(ID: 19590, TS: 8) -> Granted: true
2024/11/09 17:17:38 RequestAccess: From Peer(ID: 19233, TS: 8) -> Granted: true
\end{lstlisting}

\subsubsection*{Logs - Peer #2}
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize]
2024/11/09 17:16:48 RequestAccess: From Peer(ID: 19233, TS: 1) -> Granted: true
2024/11/09 17:16:53 Access denied, retrying...
2024/11/09 17:16:54 Accessing critical resource.
2024/11/09 17:16:59 Releasing critical resource.
2024/11/09 17:16:59 RequestAccess: From Peer(ID: 19418, TS: 1) -> Granted: false
2024/11/09 17:16:59 RequestAccess: From Peer(ID: 19418, TS: 2) -> Granted: true
2024/11/09 17:17:04 Access denied, retrying...
2024/11/09 17:17:05 RequestAccess: From Peer(ID: 19233, TS: 3) -> Granted: true
2024/11/09 17:17:10 Access denied, retrying...
2024/11/09 17:17:10 Accessing critical resource.
2024/11/09 17:17:15 Releasing critical resource.
2024/11/09 17:17:15 RequestAccess: From Peer(ID: 19418, TS: 3) -> Granted: false
2024/11/09 17:17:16 RequestAccess: From Peer(ID: 19418, TS: 4) -> Granted: true
2024/11/09 17:17:21 Access denied, retrying...
2024/11/09 17:17:21 RequestAccess: From Peer(ID: 19233, TS: 5) -> Granted: true
2024/11/09 17:17:26 Access denied, retrying...
2024/11/09 17:17:26 RequestAccess: From Peer(ID: 19418, TS: 5) -> Granted: false
2024/11/09 17:17:27 Access denied, retrying...
2024/11/09 17:17:27 Accessing critical resource.
2024/11/09 17:17:32 Releasing critical resource.
2024/11/09 17:17:32 RequestAccess: From Peer(ID: 19418, TS: 6) -> Granted: false
2024/11/09 17:17:32 RequestAccess: From Peer(ID: 19418, TS: 7) -> Granted: true
2024/11/09 17:17:37 Access denied, retrying...
2024/11/09 17:17:38 Access denied, retrying...
2024/11/09 17:17:38 Accessing critical resource.
\end{lstlisting}
\end{document}
